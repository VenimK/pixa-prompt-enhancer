
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PiXa Prompt Enhancer</title>
    <link rel="stylesheet" href="/static/css/styles.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/professional-additions.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/dark-mode-enhancements.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/style-manager.css?v={{ version }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Apply dark mode before page renders to prevent flash
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark-mode');
        }
    </script>
</head>
<body class="fade-in">
    <div id="toast-container" class="toast-container"></div>
    <button id="back-to-top" class="back-to-top" title="Back to Top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </button>
    <div class="page-wrapper">
        <nav class="navbar">
            <div class="nav-brand">
                <div class="brand-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                </div>
                <div class="brand-text">
                    <h1 class="nav-title">PiXa Prompt Editor</h1>
                    <span class="nav-subtitle">Professional AI Prompt Enhancement</span>
                </div>
            </div>
            <div class="nav-actions">
                <button id="new-prompt-btn" class="btn btn-ghost" title="New Prompt">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                </button>
                <button id="save-prompt-btn" class="btn btn-ghost" title="Save Prompt">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/>
                        <polyline points="17,21 17,13 7,13 7,21"/>
                        <polyline points="7,3 7,8 15,8"/>
                    </svg>
                </button>
                <button id="load-prompt-btn" class="btn btn-ghost" title="Load Prompt">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10,9 9,9 8,9"/>
                    </svg>
                </button>
                <div class="nav-divider"></div>
                <label class="theme-switch" for="theme-toggle" title="Toggle Dark Mode">
                    <input type="checkbox" id="theme-toggle" />
                    <span class="slider round"></span>
                </label>
            </div>
        </nav>

        {% if not api_key_set %}
        <div class="card api-warning">
            <div class="card-header">
                <h3 class="card-title">‚ö†Ô∏è Configuration Required</h3>
            </div>
            <p>The <code>GOOGLE_API_KEY</code> environment variable is not set. Please set the variable and restart the server for full functionality.</p>
        </div>
        {% else %}
        <div class="card api-info">
            <p><strong>API:</strong> {{ api_key_info.provider }} (Key: {{ api_key_info.masked_key }})</p>
        </div>
        {% endif %}
        
        <main class="main-content">
            <div class="card intro-card">
                <h2>Create powerful, nuanced prompts for generative AI models</h2>
                <p>Enhance your text prompts with detailed styles, lighting, and effects to get better results from AI models.</p>
                
                <div class="progress-steps">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">Analyze Image</div>
                            <div class="step-description">Optional - Upload an image for analysis</div>
                        </div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">Enhance Prompt</div>
                            <div class="step-description">Generate detailed AI prompts</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card image-upload-card">
                <div class="card-header">
                    <h3 class="card-title">Step 1: Analyze Image (Optional)</h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <div class="drop-zone" id="drop-zone">
                            <input type="file" id="image-upload" accept="image/*" class="drop-zone-input" multiple>
                            <div class="drop-zone-content">
                                <div class="drop-zone-icon">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"></path>
                                        <line x1="16" y1="5" x2="22" y2="5"></line>
                                        <line x1="19" y1="2" x2="19" y2="8"></line>
                                        <circle cx="9" cy="9" r="2"></circle>
                                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
                                    </svg>
                                </div>
                                <div class="drop-zone-text">
                                    <p class="drop-zone-prompt">Drag & drop an image here, or click to select</p>
                                    <p class="drop-zone-hint">Supports JPG, PNG, GIF, WebP ‚Ä¢ Max 10MB each ‚Ä¢ Up to 2 images</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button id="analyze-button" class="btn btn-primary">
                            <span class="btn-icon">üîç</span>
                            <span>Analyze Image</span>
                        </button>
                        <button id="clear-image-button" class="btn btn-outline" style="display: none;">
                            <span class="btn-icon">üóëÔ∏è</span>
                            <span>Clear</span>
                        </button>
                    </div>
                    
                    <!-- Image Analysis Result Container -->
                    <div id="image-result-container" class="image-result-container" style="display: none; margin-top: 1.5rem; padding: 1rem; background: var(--card-bg); border-radius: var(--radius-md); border: 1px solid var(--border-color);">
                        <div class="image-preview-container" style="margin-bottom: 1rem; text-align: center; display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap;">
                            <div class="image-slot" id="image-slot-a" draggable="true" style="position:relative; display:none; cursor:move; transition: opacity 0.2s;">
                                <div style="text-align:center; font-size:0.75rem; color:var(--text-muted); margin-bottom:4px;">Reference A (Source)</div>
                                <img id="image-preview" src="#" alt="Uploaded preview A" style="max-width: 100%; max-height: 300px; border-radius: var(--radius-sm); display: none; pointer-events: none;">
                                <div class="slot-controls" style="display:flex; gap:6px; justify-content:center; margin-top:6px;">
                                    <button id="replace-a" class="btn btn-xs btn-outline">Replace A</button>
                                    <button id="remove-a" class="btn btn-xs btn-outline">Remove A</button>
                                </div>
                            </div>
                            <button id="swap-images" class="btn btn-outline" style="display:none; flex-shrink:0; padding: 8px 12px; cursor:pointer;" title="Swap images between Reference A and Reference B">
                                <span style="font-size:1.25rem;">‚áÑ</span>
                            </button>
                            <div class="image-slot" id="image-slot-b" draggable="true" style="position:relative; display:none; cursor:move; transition: opacity 0.2s;">
                                <div style="text-align:center; font-size:0.75rem; color:var(--text-muted); margin-bottom:4px;">Reference B (Target)</div>
                                <img id="image-preview-b" src="#" alt="Uploaded preview B" style="max-width: 100%; max-height: 300px; border-radius: var(--radius-sm); display: none; pointer-events: none;">
                                <div class="slot-controls" style="display:flex; gap:6px; justify-content:center; margin-top:6px;">
                                    <button id="replace-b" class="btn btn-xs btn-outline">Replace B</button>
                                    <button id="remove-b" class="btn btn-xs btn-outline">Remove B</button>
                                </div>
                            </div>
                        </div>
                        <div id="add-second-image" style="display:none; text-align:center; margin-bottom: 0.5rem;">
                            <button class="btn btn-outline">+ Add second image</button>
                        </div>
                        <div id="image-progress-container" style="display: none; margin-bottom: 1rem;">
                            <div class="progress-bar" style="height: 4px; background: var(--border-color); border-radius: 2px; overflow: hidden;">
                                <div class="progress" style="height: 100%; width: 0%; background: var(--primary-color); transition: width 0.3s ease;"></div>
                            </div>
                            <p style="text-align: center; margin: 0.5rem 0 0; color: var(--text-muted); font-size: 0.875rem;">Analyzing image...</p>
                        </div>
                        <div id="image-description" style="display: none;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <h4 style="margin: 0; font-size: 1rem; color: var(--text-color);">Image Analysis</h4>
                                <button id="toggle-analysis" class="btn-text" style="font-size: 0.875rem; color: var(--primary-color); cursor: pointer; background: none; border: none; padding: 0.25rem 0.5rem; display: flex; align-items: center; gap: 0.25rem; font-weight: 500;">
                                    <span id="toggle-text">Show More</span>
                                    <svg id="toggle-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="transition: transform 0.3s ease; transform: rotate(180deg);">
                                        <path d="M18 15l-6-6-6 6"/>
                                    </svg>
                                </button>
                            </div>
                            <div id="analysis-content" class="analysis-content" style="overflow: hidden; transition: max-height 0.3s ease;">
                                <p id="image-description-text" style="margin: 0; color: var(--text-muted); font-size: 0.9375rem; line-height: 1.5;"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Audio Upload Section -->
            <div class="card audio-upload-card" id="audio-upload-card" style="display: none;">
                <div class="card-header">
                    <h3 class="card-title">Step 1.5: Upload Audio (Optional - LTX-2 Only)</h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <div class="drop-zone" id="audio-drop-zone">
                            <input type="file" id="audio-upload" accept="audio/*" class="drop-zone-input">
                            <div class="drop-zone-content">
                                <div class="drop-zone-icon">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M9 18V5l12-2v13"></path>
                                        <circle cx="6" cy="18" r="3"></circle>
                                        <circle cx="18" cy="16" r="3"></circle>
                                    </svg>
                                </div>
                                <div class="drop-zone-text">
                                    <p class="drop-zone-prompt">Drag & drop an audio file here, or click to select</p>
                                    <p class="drop-zone-hint">Supports MP3, WAV, M4A, OGG ‚Ä¢ Max 50MB ‚Ä¢ For singing/dancing synchronization</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="audio-preview-container" style="display: none;">
                        <div class="audio-preview">
                            <audio id="audio-preview" controls style="width: 100%; margin: 10px 0;"></audio>
                            <div class="audio-info">
                                <span id="audio-file-name"></span>
                                <button id="remove-audio-btn" class="btn btn-secondary btn-small">Remove Audio</button>
                            </div>
                        </div>
                        <!-- Audio Analysis Results -->
                        <div id="audio-analysis-results" class="audio-analysis-results" style="display: none;">
                            <h4 class="analysis-title">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 18V5l12-2v13"></path>
                                    <circle cx="6" cy="18" r="3"></circle>
                                    <circle cx="18" cy="16" r="3"></circle>
                                </svg>
                                Audio Analysis
                            </h4>
                            <div class="analysis-grid">
                                <div class="analysis-item">
                                    <span class="analysis-label">Type</span>
                                    <span class="analysis-value" id="audio-type">‚Äî</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Tempo</span>
                                    <span class="analysis-value" id="audio-tempo">‚Äî</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">BPM</span>
                                    <span class="analysis-value" id="audio-bpm">‚Äî</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Mood</span>
                                    <span class="analysis-value" id="audio-mood">‚Äî</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Energy</span>
                                    <span class="analysis-value" id="audio-energy">‚Äî</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Vocals</span>
                                    <span class="analysis-value" id="audio-vocals">‚Äî</span>
                                </div>
                                <div class="analysis-item">
                                    <span class="analysis-label">Danceability</span>
                                    <div class="analysis-bar">
                                        <div class="analysis-bar-fill" id="audio-danceability-bar" style="width: 0%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="analysis-description" id="audio-description-text"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card prompt-card">
                <div class="editor-header">
                    <h2 class="editor-title">Prompt Editor</h2>
                    <div class="editor-tabs">
                        <button class="editor-tab active" data-tab="compose">Compose</button>
                        <button class="editor-tab" data-tab="templates">Templates</button>
                        <button class="editor-tab" data-tab="history">History</button>
                        <button class="editor-tab" data-tab="compare">Compare</button>
                    </div>
                </div>

                <div class="editor-content">
                    <!-- Compose Tab -->
                    <div class="tab-pane active" id="compose-tab">
                        <div class="editor-toolbar">
                            <div class="toolbar-group">
                                <button id="enhance-btn" class="btn btn-primary">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
                                    </svg>
                                    Enhance Prompt
                                </button>
                                <button id="clear-prompt-btn" class="btn btn-outline">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                    </svg>
                                    Clear
                                </button>
                            </div>
                            <div class="toolbar-group">
                                <div class="model-selector">
                                    <label for="prompt-type-select">Type:</label>
                                    <select id="prompt-type-select">
                                        <option value="Image">Image</option>
                                        <option value="3D">3D Model</option>
                                        <option value="VEO">Video (VEO)</option>
                                        <option value="WAN2">Animation (WAN2)</option>
                                        <option value="LTX2">Video (LTX-2)</option>
                                    </select>
                                </div>
                                <div class="model-selector">
                                    <label for="model-select">Model:</label>
                                    <select id="model-select">
                                        <option value="default">Default</option>
                                        <optgroup label="Photorealistic">
                                            <option value="flux">Flux</option>
                                            <option value="pixart">PixArt</option>
                                            <option value="dalle3">DALL-E 3</option>
                                        </optgroup>
                                        <optgroup label="Versatile">
                                            <option value="qwen">Qwen</option>
                                            <option value="midjourney">Midjourney</option>
                                            <option value="sdxl">SDXL</option>
                                        </optgroup>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="editor-area">
                            <div class="prompt-input-section">
                                <div class="input-header">
                                    <label for="prompt-input">Prompt</label>
                                    <div class="input-meta">
                                        <span id="char-count">0</span>
                                        <span id="word-count">0 words</span>
                                    </div>
                                </div>
                                <div class="textarea-container">
                                    <textarea id="prompt-input" placeholder="Enter your prompt idea here..."></textarea>
                                    <div class="input-actions">
                                        <button id="paste-btn" class="btn btn-ghost btn-sm" title="Paste">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/>
                                                <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
                                            </svg>
                                        </button>
                                        <button id="expand-btn" class="btn btn-ghost btn-sm" title="Expand">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="enhancement-panel">
                                <div class="panel-header">
                                    <h3>Enhancement Settings</h3>
                                    <button id="toggle-settings" class="btn btn-ghost btn-sm">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M19 9l-7 7-7-7"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="panel-content" id="settings-panel">
                                    <div class="settings-grid">
                                        <div class="setting-group">
                                            <label>Style</label>
                                            <select id="style-select">
                                                <option value="">Auto</option>
                                                <option value="photorealistic">Photorealistic</option>
                                                <option value="artistic">Artistic</option>
                                                <option value="minimalist">Minimalist</option>
                                            </select>
                                        </div>
                                        <div class="setting-group">
                                            <label>Lighting</label>
                                            <select id="lighting-select">
                                                <option value="">Auto</option>
                                                <option value="natural">Natural</option>
                                                <option value="studio">Studio</option>
                                                <option value="dramatic">Dramatic</option>
                                            </select>
                                        </div>
                                        <div class="setting-group">
                                            <label>Cinematography</label>
                                            <select id="cinematography-select">
                                                <option value="">Auto</option>
                                                <option value="wide shot">Wide Shot</option>
                                                <option value="close-up">Close-up</option>
                                                <option value="portrait">Portrait</option>
                                            </select>
                                        </div>
                                        <div class="setting-group">
                                            <label>Motion</label>
                                            <select id="motion-select">
                                                <option value="Static">Static</option>
                                                <option value="subtle">Subtle</option>
                                                <option value="dynamic">Dynamic</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Templates Tab -->
                    <div class="tab-pane" id="templates-tab">
                        <div class="templates-library">
                            <div class="templates-header">
                                <h3>Prompt Templates</h3>
                                <div class="template-search">
                                    <input type="text" placeholder="Search templates..." id="template-search">
                                </div>
                            </div>
                            <div class="template-categories">
                                <button class="category-btn active" data-category="all">All</button>
                                <button class="category-btn" data-category="image">Image</button>
                                <button class="category-btn" data-category="video">Video</button>
                                <button class="category-btn" data-category="3d">3D</button>
                            </div>
                            <div class="templates-grid" id="templates-grid">
                                <!-- Templates will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- History Tab -->
                    <div class="tab-pane" id="history-tab">
                        <div class="history-panel">
                            <div class="history-header">
                                <h3>Prompt History</h3>
                                <button id="clear-history-btn" class="btn btn-outline btn-sm">Clear All</button>
                            </div>
                            <div class="history-list" id="history-list-tab">
                                <!-- History items will be loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Compare Tab -->
                    <div class="tab-pane" id="compare-tab">
                        <div class="compare-panel">
                            <div class="compare-header">
                                <h3>Compare Prompts</h3>
                                <button id="swap-compare-btn" class="btn btn-outline btn-sm">Swap</button>
                            </div>
                            <div class="compare-container">
                                <div class="compare-column">
                                    <h4>Original</h4>
                                    <div class="compare-text" id="original-text"></div>
                                </div>
                                <div class="compare-divider"></div>
                                <div class="compare-column">
                                    <h4>Enhanced</h4>
                                    <div class="compare-text" id="enhanced-text"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                <!-- 3D Model Type Selector (shown when promptType=3D) -->
                <div class="selector" id="model-type-selector-container" style="display: none;">
                    <label for="model-type-select">3D Model Type:</label>
                    <select id="model-type-select">
                        <option value="character" selected>Character (human/animal/creature)</option>
                        <option value="object">Object (general items/props)</option>
                        <option value="vehicle">Vehicle (cars/bikes/aircraft)</option>
                        <option value="environment">Environment (buildings/landscapes)</option>
                        <option value="props">Props (small accessories/items)</option>
                    </select>
                </div>
                <!-- Style Selector -->
                <div class="style-selector">
                    <div class="style-header">
                        <h3>Art Style</h3>
                        <div class="style-preview">No style selected</div>
                    </div>
                    <div class="style-search">
                        <input type="text" id="style-search-input" placeholder="üîç Search styles..." autocomplete="off">
                        <div class="style-search-results"></div>
                    </div>
                    <div class="style-categories">
                        <!-- Categories will be populated by JavaScript -->
                    </div>
                    <div class="style-actions">
                        <button id="apply-style" class="btn btn-primary">Apply Style</button>
                        <button id="remove-styles" class="btn btn-warning" style="display: none;">Remove Styles</button>
                        <button id="clear-style" class="btn btn-outline">Clear Selection</button>
                    </div>
                </div>

                <!-- Wrapping Preset (A ‚Üí B) -->
                <div class="card" id="wrapping-preset" style="margin-top: 16px;">
                    <div class="card-header">
                        <h3 class="card-title">Wrapping Preset (Reference A ‚Üí Reference B)</h3>
                    </div>
                    <div class="card-body" style="display:grid; gap:12px;">
                        <div style="display:flex; gap:12px; flex-wrap:wrap;">
                            <div class="selector">
                                <label for="wrap-type">Wrap Type</label>
                                <select id="wrap-type">
                                    <option value="vehicle">Vehicle wrap</option>
                                    <option value="full">Full wrap / livery</option>
                                    <option value="partial">Partial panels</option>
                                    <option value="decal">Decal / sticker</option>
                                    <option value="product">Product wrap (can/bottle/glass)</option>
                                    <option value="logo">Logo / branding</option>
                                    <option value="character">Character wrap (person/animal)</option>
                                    <option value="people-object">People/Object (A‚ÜíB transfer)</option>
                                    <option value="sticker-pack">Sticker pack / sheet</option>
                                </select>
                            </div>
                            <div class="selector">
                                <label for="wrap-finish">Finish</label>
                                <select id="wrap-finish">
                                    <option value="glossy">Glossy vinyl</option>
                                    <option value="matte">Matte vinyl</option>
                                    <option value="metallic">Metallic foil</option>
                                    <option value="paper">Paper label</option>
                                    <option value="shrink">Shrink-wrap film</option>
                                </select>
                            </div>
                            <div class="selector" style="min-width:240px;flex:1;">
                                <label for="wrap-scope-preset">Scope Preset</label>
                                <select id="wrap-scope-preset">
                                    <option value="">Custom (use text below)</option>
                                    <option value="all">All visible surfaces</option>
                                    <option value="360">Full 360¬∞ wrap</option>
                                    <option value="full-can">Full can: shoulder + body + lid/top</option>
                                    <option value="body-only">Body only (no lid/rims)</option>
                                    <option value="glass-bowl">Glass (transparent): bowl area</option>
                                    <option value="glass-full">Glass (transparent): full coverage</option>
                                    <option value="glass-opaque">Glass (opaque/colored): replace color</option>
                                    <option value="front">Front label/panel only</option>
                                    <option value="neck">Neck band</option>
                                    <option value="cap">Cap/lid only</option>
                                </select>
                            </div>
                            <div class="selector" style="min-width:240px;flex:1;">
                                <label for="wrap-scope">Custom Scope</label>
                                <input id="wrap-scope" type="text" placeholder="e.g., hood, doors, fenders">
                            </div>
                        </div>

                        <div class="selector" style="display:flex; gap:12px; align-items:flex-start; flex-wrap:wrap;">
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="enforce-palette" checked>
                                Enforce Reference A palette
                            </label>
                            <input id="palette-list" type="text" placeholder="Palette from A (comma-separated)" style="flex:1; min-width:260px;">
                        </div>

                        <div class="selector" style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="plain-enhance">
                                Plain Enhance (ignore all wrap presets)
                            </label>
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="neutralize-b" checked>
                                Replace B colors with A (keep B shape)
                            </label>
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="multi-stage">
                                Multi-stage prompting (better consistency)
                            </label>
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="accessories-only">
                                Accessories only (avoid full outfit swap)
                            </label>
                        </div>

                        <!-- People/Object override: choose detected objects from B -->
                        <div id="object-override-container" class="selector" style="display:none; flex-direction:column; gap:8px;">
                            <label for="object-override">Object(s) from Reference B (override detection)</label>
                            <select id="object-override" multiple size="6" style="min-width:240px; max-width:520px;">
                                <!-- Options populated from image analysis -->
                            </select>
                            <small style="color:var(--text-muted);">Tip: Hold Cmd/Ctrl to select multiple. Leave empty to auto-detect.</small>
                        </div>

                        <!-- Vehicle-specific controls (shown when wrap-type=vehicle) -->
                        <div id="vehicle-controls" style="display:none;">
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="transfer-vehicle-color">
                                Transfer base color from Reference A (otherwise keep Reference B's color)
                            </label>
                        </div>

                        <!-- Logo-specific controls (shown when wrap-type=logo) -->
                        <div id="logo-controls" style="display:none; gap:12px;">
                            <div style="display:flex; gap:12px; flex-wrap:wrap;">
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="logo-placement">Logo Placement</label>
                                    <select id="logo-placement">
                                        <option value="center">Center</option>
                                        <option value="top-center">Top center</option>
                                        <option value="bottom-center">Bottom center</option>
                                        <option value="left">Left side</option>
                                        <option value="right">Right side</option>
                                        <option value="custom">Custom (use scope field)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="logo-size">Logo Size</label>
                                    <select id="logo-size">
                                        <option value="proportional">Proportional (auto)</option>
                                        <option value="small">Small (subtle)</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="large">Large (prominent)</option>
                                        <option value="full">Full coverage</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label style="display:flex; align-items:center; gap:8px; margin-top:24px;">
                                        <input type="checkbox" id="logo-pattern">
                                        Repeating pattern
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Character-specific controls (shown when wrap-type=character) -->
                        <div id="character-controls" style="display:none; gap:12px;">
                            <div style="display:flex; gap:12px; flex-wrap:wrap;">
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="character-placement">Logo Placement on Character</label>
                                    <select id="character-placement">
                                        <option value="chest">Chest/Heart area</option>
                                        <option value="belly">Belly/Tummy</option>
                                        <option value="back">Back/Shoulders</option>
                                        <option value="hat">Hat/Headwear</option>
                                        <option value="arm">Arm/Sleeve</option>
                                        <option value="leg">Leg/Pants</option>
                                        <option value="full-body">Full body outfit</option>
                                        <option value="accessory">Accessory (bag, scarf, etc.)</option>
                                        <option value="custom">Custom (use scope field)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="character-logo-size">Logo Size</label>
                                    <select id="character-logo-size">
                                        <option value="tiny">Tiny (subtle detail)</option>
                                        <option value="small">Small (patch size)</option>
                                        <option value="medium" selected>Medium (prominent)</option>
                                        <option value="large">Large (statement piece)</option>
                                        <option value="full">Full coverage</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="character-integration">Integration Style</label>
                                    <select id="character-integration">
                                        <option value="natural">Natural (part of clothing)</option>
                                        <option value="patch">Patch/appliqu√©</option>
                                        <option value="printed">Printed fabric</option>
                                        <option value="embroidered">Embroidered</option>
                                        <option value="painted">Body paint/makeup</option>
                                        <option value="projected">Projected light</option>
                                        <option value="magical">Magical glow/aura</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label style="display:flex; align-items:center; gap:8px; margin-top:24px;">
                                        <input type="checkbox" id="character-animated">
                                        Animated/moving logo
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Sticker pack controls (shown when wrap-type=sticker-pack) -->
                        <div id="sticker-controls" style="display:none; gap:12px;">
                            <div style="display:flex; gap:12px; flex-wrap:wrap;">
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-count">Number of Stickers</label>
                                    <select id="sticker-count">
                                        <option value="4">4 stickers (2x2)</option>
                                        <option value="6">6 stickers (2x3)</option>
                                        <option value="9" selected>9 stickers (3x3)</option>
                                        <option value="12">12 stickers (3x4)</option>
                                        <option value="16">16 stickers (4x4)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-style">Sticker Style</label>
                                    <select id="sticker-style">
                                        <option value="die-cut" selected>Die-cut with white border</option>
                                        <option value="no-border">Die-cut no border</option>
                                        <option value="rounded">Rounded square</option>
                                        <option value="circle">Circular</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-character-style">Sticker Character Style</label>
                                    <select id="sticker-character-style">
                                        <option value="match-reference" selected>Match Reference A</option>
                                        <option value="cartoon">Cartoon</option>
                                        <option value="chibi">Chibi (super deformed)</option>
                                        <option value="semi-realistic">Semi-realistic</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-sheet-output">Sticker Sheet Output</label>
                                    <select id="sticker-sheet-output">
                                        <option value="realistic" selected>Realistic sheet mockup</option>
                                        <option value="transparent">Transparent PNG assets</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-cut-type">Cut Type</label>
                                    <select id="sticker-cut-type">
                                        <option value="kiss-cut" selected>Kiss-cut (on backing paper)</option>
                                        <option value="die-cut">Die-cut (fully separated)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-border-thickness">Border Thickness</label>
                                    <select id="sticker-border-thickness">
                                        <option value="thin">Thin</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="thick">Thick</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-camera">Camera Angle</label>
                                    <select id="sticker-camera">
                                        <option value="top-down" selected>Top-down flat lay</option>
                                        <option value="slight-angle">Slight angle (product photo)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label style="display:flex; align-items:center; gap:8px; margin-top:24px;">
                                        <input type="checkbox" id="sticker-inner-keyline">
                                        Inner keyline (thin outline inside border)
                                    </label>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-variation">Variation Type</label>
                                    <select id="sticker-variation">
                                        <option value="poses" selected>Different poses/expressions</option>
                                        <option value="elements">Different elements/props</option>
                                        <option value="colors">Different color variants</option>
                                        <option value="scenes">Different scenes/activities</option>
                                        <option value="emotions">Different emotions/moods</option>
                                        <option value="outfits">Different outfits/costumes</option>
                                        <option value="seasons">Seasonal variations</option>
                                        <option value="interactions">Interacting with objects</option>
                                        <option value="weather">Weather/time variations</option>
                                        <option value="styles">Different art styles</option>
                                        <option value="actions">Action/movement variations</option>
                                        <option value="hobbies">Hobbies/sports activities</option>
                                        <option value="gestures">Hand gestures/signs</option>
                                        <option value="occupations">Occupations/professions</option>
                                        <option value="text-bubbles">Text bubbles/messages</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-plan-source">Variation plan source</label>
                                    <select id="sticker-plan-source">
                                        <option value="built-in" selected>Built-in (deterministic)</option>
                                        <option value="ai-enhance">AI-generated (Enhance Prompt)</option>
                                    </select>
                                </div>
                            </div>
                            <!-- Text bubble messages input (shown when variation=text-bubbles) -->
                            <div id="bubble-text-container" style="display:none; margin-top:12px;">
                                <label for="bubble-text" style="display:block; margin-bottom:6px; font-weight:500;">
                                    Text for Bubbles <span style="color:var(--text-muted); font-size:0.9em;">(separate with commas)</span>
                                </label>
                                <input type="text" id="bubble-text" placeholder="e.g., Hello!, Thanks!, Yay!, Wow!, LOL, OK!, Bye!, Love it!, No way!" 
                                       style="width:100%; padding:8px; border:1px solid var(--border-color); border-radius:6px; font-size:0.95em;">
                                <div style="color:var(--text-muted); font-size:0.85em; margin-top:4px;">
                                    Leave empty for generic varied messages
                                </div>
                            </div>
                        </div>

                        <div style="display:flex; gap:12px; flex-wrap:wrap;">
                            <button id="insert-wrap-prompt" class="btn btn-primary">Insert Wrapping Prompt</button>
                            <span id="wrap-hint" style="color:var(--text-muted); font-size:0.9em;">Uses your A/B analysis above.</span>
                        </div>
                    </div>
                </div>
        <div class="selectors-container">
            <div class="selector" id="text-emphasis-container">
                <label for="text-emphasis-input">Text to Emphasize:</label>
                <div class="text-emphasis-wrapper">
                    <input type="text" id="text-emphasis-input" placeholder="e.g., PiXa Contest">
                </div>
                <div class="text-controls">
                    <button id="text-controls-toggle" class="text-controls-toggle">Show more options</button>
                    <div class="text-control-row">
                        <div class="text-control-group">
                            <label for="text-emphasis-position">Position:</label>
                            <select id="text-emphasis-position">
                                <option value="">Choose position...</option>
                                <optgroup label="Standard Positions">
                                    <option value="center">Center</option>
                                    <option value="top">Top</option>
                                    <option value="bottom">Bottom</option>
                                    <option value="left">Left Side</option>
                                    <option value="right">Right Side</option>
                                </optgroup>
                                <optgroup label="Specific Placements">
                                    <option value="plaque">On Plaque</option>
                                    <option value="sign">On Sign</option>
                                    <option value="banner">On Banner</option>
                                    <option value="screen">On Screen</option>
                                    <option value="etched">Etched/Carved</option>
                                    <option value="floating">Floating/Holographic</option>
                                    <option value="graffiti">As Graffiti</option>
                                    <option value="neon">Neon Sign</option>
                                    <option value="tattoo">As Tattoo</option>
                                    <option value="skywriting">Skywriting</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="text-control-group">
                            <label for="text-emphasis-size">Size:</label>
                            <select id="text-emphasis-size">
                                <option value="">Choose size...</option>
                                <option value="tiny">Tiny</option>
                                <option value="small">Small</option>
                                <option value="medium">Medium</option>
                                <option value="large">Large</option>
                                <option value="huge">Huge</option>
                                <option value="giant">Giant/Monumental</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-control-row">
                        <div class="text-control-group">
                            <label for="text-emphasis-style">Style:</label>
                            <select id="text-emphasis-style">
                                <option value="">Choose style...</option>
                                <option value="bold">Bold</option>
                                <option value="elegant">Elegant/Serif</option>
                                <option value="modern">Modern/Sans-serif</option>
                                <option value="handwritten">Handwritten</option>
                                <option value="vintage">Vintage</option>
                                <option value="futuristic">Futuristic</option>
                                <option value="gothic">Gothic</option>
                                <option value="blocky">Blocky/3D</option>
                                <option value="minimalist">Minimalist</option>
                                <option value="ornate">Ornate/Decorative</option>
                                <option value="pixel">Pixel/8-bit</option>
                                <option value="calligraphy">Calligraphy</option>
                            </select>
                        </div>
                        <div class="text-control-group">
                            <label for="text-emphasis-color">Color:</label>
                            <select id="text-emphasis-color">
                                <option value="">Choose color...</option>
                                <option value="white">White</option>
                                <option value="black">Black</option>
                                <option value="red">Red</option>
                                <option value="blue">Blue</option>
                                <option value="green">Green</option>
                                <option value="purple">Purple</option>
                                <option value="yellow">Yellow</option>
                                <option value="orange">Orange</option>
                                <option value="pink">Pink</option>
                                <option value="teal">Teal</option>
                                <option value="gold">Gold</option>
                                <option value="silver">Silver</option>
                                <option value="copper">Copper</option>
                                <option value="neon-blue">Neon Blue</option>
                                <option value="neon-pink">Neon Pink</option>
                                <option value="neon-green">Neon Green</option>
                                <option value="glowing">Glowing</option>
                                <option value="rainbow">Rainbow</option>
                                <option value="gradient">Gradient</option>
                                <option value="contrast">High Contrast</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-control-row">
                        <div class="text-control-group">
                            <label for="text-emphasis-effect">Effect:</label>
                            <select id="text-emphasis-effect">
                                <option value="">Choose effect...</option>
                                <option value="shadow">Drop Shadow</option>
                                <option value="outline">Outlined</option>
                                <option value="embossed">Embossed</option>
                                <option value="beveled">Beveled</option>
                                <option value="distressed">Distressed/Worn</option>
                                <option value="glitch">Glitch Effect</option>
                                <option value="blur">Motion Blur</option>
                                <option value="sparkle">Sparkling</option>
                                <option value="fire">Fire Effect</option>
                                <option value="ice">Ice/Frost Effect</option>
                                <option value="smoke">Smoke Effect</option>
                            </select>
                        </div>
                        <div class="text-control-group">
                            <label for="text-emphasis-material">Material:</label>
                            <select id="text-emphasis-material">
                                <option value="">Choose material...</option>
                                <option value="stone">Stone</option>
                                <option value="metal">Metal</option>
                                <option value="wood">Wood</option>
                                <option value="glass">Glass</option>
                                <option value="crystal">Crystal</option>
                                <option value="ice">Ice</option>
                                <option value="paper">Paper</option>
                                <option value="plastic">Plastic</option>
                                <option value="neon">Neon Tubes</option>
                                <option value="led">LED Display</option>
                                <option value="hologram">Holographic</option>
                                <option value="liquid">Liquid</option>
                                <option value="fire">Fire</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-control-row">
                        <div class="text-control-group">
                            <label for="text-emphasis-background">Background:</label>
                            <select id="text-emphasis-background">
                                <option value="">Choose background...</option>
                                <option value="none">No Special Background</option>
                                <option value="contrasting">Contrasting Color</option>
                                <option value="halo">Halo/Glow</option>
                                <option value="spotlight">Spotlight</option>
                                <option value="shadow">Dramatic Shadow</option>
                                <option value="frame">Decorative Frame</option>
                                <option value="ribbon">Ribbon</option>
                                <option value="clouds">Clouds</option>
                                <option value="stars">Stars/Space</option>
                                <option value="blur">Blurred Background</option>
                            </select>
                        </div>
                        <div class="text-control-group">
                            <label for="text-emphasis-integration">Integration:</label>
                            <select id="text-emphasis-integration">
                                <option value="">Choose integration...</option>
                                <option value="foreground">Foreground (Stands Out)</option>
                                <option value="integrated">Integrated with Scene</option>
                                <option value="part-of">Part of Environment</option>
                                <option value="hidden">Subtly Hidden</option>
                                <option value="focal">Main Focal Point</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="selector" id="motion-effect-selector-container" style="display: none;">
                <label for="motion-effect-select">Motion Effect:</label>
                <select id="motion-effect-select">
                    <option value="Static">Static</option>
                    <optgroup label="Camera Movements">
                        <option value="Subtle Zoom In">Subtle Zoom In</option>
                        <option value="Zoom Out">Zoom Out</option>
                        <option value="Pan Left">Pan Left</option>
                        <option value="Pan Right">Pan Right</option>
                        <option value="Tilt Up">Tilt Up</option>
                        <option value="Tilt Down">Tilt Down</option>
                        <option value="Dolly In">Dolly In</option>
                        <option value="Dolly Out">Dolly Out</option>
                        <option value="Tracking Shot">Tracking Shot</option>
                    </optgroup>
                    <optgroup label="Cinematic Effects">
                        <option value="Slow Motion">Slow Motion</option>
                        <option value="Time Lapse">Time Lapse</option>
                        <option value="Dolly Zoom">Dolly Zoom</option>
                        <option value="Whip Pan">Whip Pan</option>
                        <option value="Dutch Angle">Dutch Angle</option>
                        <option value="Fade In">Fade In</option>
                        <option value="Fade Out">Fade Out</option>
                        <option value="Reverse">Reverse</option>
                        <option value="Freeze Frame">Freeze Frame</option>
                        <option value="Flashback">Flashback</option>
                    </optgroup>
                    <optgroup label="Special Movements">
                        <option value="Orbital">Orbital</option>
                        <option value="Crane Shot">Crane Shot</option>
                        <option value="Drone Flyover">Drone Flyover</option>
                        <option value="Handheld">Handheld</option>
                        <option value="Steadicam">Steadicam</option>
                    </optgroup>
                    <optgroup label="Subject Motion">
                        <option value="Walking Forward">Walking Forward</option>
                        <option value="Running">Running</option>
                        <option value="Dancing">Dancing</option>
                        <option value="Spinning">Spinning</option>
                        <option value="Floating">Floating</option>
                        <option value="Jumping">Jumping</option>
                        <option value="Swimming">Swimming</option>
                        <option value="Flying">Flying</option>
                        <option value="Crawling">Crawling</option>
                        <option value="Rolling">Rolling</option>
                    </optgroup>
                    <optgroup label="Object Motion">
                        <option value="Falling">Falling</option>
                        <option value="Bouncing">Bouncing</option>
                        <option value="Sliding">Sliding</option>
                        <option value="Rotating">Rotating</option>
                        <option value="Growing">Growing</option>
                        <option value="Shrinking">Shrinking</option>
                        <option value="Dissolving">Dissolving</option>
                        <option value="Morphing">Morphing</option>
                    </optgroup>
                </select>
            </div>

            <!-- LTX-2 Specific Controls -->
            <div class="selector" id="ltx2-controls-container" style="display: none;">
                <label for="audio-generation-select">Audio Generation:</label>
                <select id="audio-generation-select">
                    <option value="enabled">Enabled (Synchronized Audio)</option>
                    <option value="disabled">Disabled (Video Only)</option>
                </select>
            </div>

            <div class="selector" id="ltx2-resolution-container" style="display: none;">
                <label for="resolution-select">Resolution:</label>
                <select id="resolution-select">
                    <option value="4K">4K (Native 50 FPS)</option>
                    <option value="1080p">1080p</option>
                    <option value="720p">720p</option>
                </select>
            </div>

            <div class="selector" id="ltx2-movement-container" style="display: none;">
                <label for="movement-level-select">Movement Level:</label>
                <select id="movement-level-select">
                    <option value="auto" selected>Auto (Audio Detection)</option>
                    <option value="static">Static (Only Lip-Sync)</option>
                    <option value="minimal">Minimal (Subtle Movement)</option>
                    <option value="natural">Natural (Normal Movement)</option>
                    <option value="expressive">Expressive (Full Body)</option>
                    <option value="dynamic">Dynamic (High Energy)</option>
                </select>
            </div>

            <div class="selector" id="ltx2-style-container" style="display: none;">
                <label for="ltx2-style-select">Video Style:</label>
                <select id="ltx2-style-select">
                    <option value="auto">Auto (Match Audio)</option>
                    <optgroup label="Performance Styles">
                        <option value="music_video">Music Video</option>
                        <option value="concert">Concert Performance</option>
                        <option value="dance">Dance Performance</option>
                        <option value="lip_sync">Lip Sync Performance</option>
                        <option value="acoustic">Acoustic Session</option>
                    </optgroup>
                    <optgroup label="Cinematic Styles">
                        <option value="cinematic">Cinematic</option>
                        <option value="dramatic">Dramatic Scene</option>
                        <option value="documentary">Documentary Style</option>
                        <option value="vintage">Vintage Film</option>
                        <option value="noir">Film Noir</option>
                    </optgroup>
                    <optgroup label="Artistic Styles">
                        <option value="artistic">Artistic</option>
                        <option value="surreal">Surreal</option>
                        <option value="abstract">Abstract</option>
                        <option value="dreamy">Dreamy</option>
                        <option value="psychedelic">Psychedelic</option>
                    </optgroup>
                    <optgroup label="Modern Styles">
                        <option value="cyberpunk">Cyberpunk</option>
                        <option value="vaporwave">Vaporwave</option>
                        <option value="lofi">Lo-Fi Aesthetic</option>
                        <option value="retro">Retro 80s/90s</option>
                        <option value="futuristic">Futuristic</option>
                    </optgroup>
                </select>
            </div>

            <!-- Enhancement Mode Selector -->
            <div class="enhancement-mode-selector">
                <label for="enhancement-mode">Enhancement Mode:</label>
                <select id="enhancement-mode" name="enhancement_mode">
                    <option value="general">General Enhancement</option>
                    <option value="commercial">üì∏ Commercial Photography</option>
                    <option value="cinematic">üé¨ Cinematic Production</option>
                    <option value="character">üé≠ Character Design</option>
                    <option value="object">üöÄ Object/Scene Effects</option>
                    <option value="ace-step">üéµ ACE-Step Music Prompt</option>
                    <option value="auto">ü§ñ Auto-Detect</option>
                </select>
                <div class="mode-description" id="mode-description">
                    Standard prompt enhancement optimized for your selected model and settings.
                </div>
            </div>

            <div class="selector">
                <label for="style-select">Style:</label>
                <select id="style-select">
                    <option value="auto">Automatic</option>
                    <optgroup label="Photography & Film">
                        <option value="Photographic">Photographic</option>
                        <option value="Cinematic">Cinematic</option>
                        <option value="Documentary">Documentary</option>
                        <option value="Commercial">Commercial</option>
                        <option value="Vintage Film">Vintage Film</option>
                        <option value="Noir">Film Noir</option>
                        <option value="Polaroid">Polaroid</option>
                        <option value="Retro">Retro</option>
                    </optgroup>
                    <optgroup label="Art Styles">
                        <option value="Fine Art">Fine Art</option>
                        <option value="Impressionist">Impressionist</option>
                        <option value="Expressionist">Expressionist</option>
                        <option value="Cubist">Cubist</option>
                        <option value="Surreal">Surreal</option>
                        <option value="Pop Art">Pop Art</option>
                        <option value="Minimalist">Minimalist</option>
                        <option value="Abstract">Abstract</option>
                        <option value="Digital Art">Digital Art</option>
                    </optgroup>
                    <optgroup label="Genre Styles">
                        <option value="Fantasy">Fantasy</option>
                        <option value="Sci-Fi">Sci-Fi</option>
                        <option value="Cyberpunk">Cyberpunk</option>
                        <option value="Steampunk">Steampunk</option>
                        <option value="Horror">Horror</option>
                        <option value="Gothic">Gothic</option>
                        <option value="Anime">Anime</option>
                        <option value="Cartoon">Cartoon</option>
                        <option value="Comic Book">Comic Book</option>
                    </optgroup>
                    <optgroup label="Lighting & Mood">
                        <option value="Dark">Dark</option>
                        <option value="Bright">Bright</option>
                        <option value="Moody">Moody</option>
                        <option value="Ethereal">Ethereal</option>
                        <option value="Dramatic">Dramatic</option>
                    </optgroup>
                </select>
            </div>
            <div class="selector">
                <label for="cinematography-select">Cinematography:</label>
                <select id="cinematography-select">
                    <option value="auto">Automatic</option>
                    <optgroup label="Basic Shots">
                        <option value="Wide Shot">Wide Shot</option>
                        <option value="Medium Shot">Medium Shot</option>
                        <option value="Close Up">Close Up</option>
                        <option value="Extreme Close Up">Extreme Close Up</option>
                    </optgroup>
                    <optgroup label="Angle Shots">
                        <option value="Bird's Eye">Bird's Eye View</option>
                        <option value="High Angle">High Angle</option>
                        <option value="Low Angle">Low Angle</option>
                        <option value="Dutch Angle">Dutch Angle</option>
                    </optgroup>
                    <optgroup label="Movement Shots">
                        <option value="Tracking Shot">Tracking Shot</option>
                        <option value="Dolly Zoom">Dolly Zoom</option>
                        <option value="Steadicam">Steadicam</option>
                        <option value="Handheld">Handheld</option>
                        <option value="Drone Shot">Drone Shot</option>
                    </optgroup>
                    <optgroup label="Special Shots">
                        <option value="Telephoto">Telephoto</option>
                        <option value="Macro">Macro</option>
                        <option value="Split Screen">Split Screen</option>
                        <option value="Fisheye">Fisheye</option>
                        <option value="Tilt Shift">Tilt Shift</option>
                    </optgroup>
                    <option value="Time-lapse">Time-lapse</option>
                </select>
            </div>
            <div class="selector">
                <label for="lighting-select">Lighting:</label>
                <select id="lighting-select">
                    <option value="auto">Automatic</option>
                    <optgroup label="Natural Light">
                        <option value="Golden Hour">Golden Hour</option>
                        <option value="Sunrise">Sunrise</option>
                        <option value="Midday">Midday</option>
                        <option value="Sunset">Sunset</option>
                        <option value="Moonlight">Moonlight</option>
                        <option value="Natural">Natural</option>
                        <option value="Overcast">Overcast</option>
                    </optgroup>
                    <optgroup label="Studio Light">
                        <option value="Studio">Studio</option>
                        <option value="Soft">Soft</option>
                        <option value="High Key">High Key</option>
                        <option value="Low Key">Low Key</option>
                        <option value="Rembrandt">Rembrandt</option>
                        <option value="Split">Split</option>
                        <option value="Backlit">Backlit</option>
                    </optgroup>
                    <optgroup label="Atmospheric">
                        <option value="Foggy">Foggy</option>
                        <option value="Hazy">Hazy</option>
                        <option value="Smoky">Smoky</option>
                        <option value="Rainy">Rainy</option>
                        <option value="Snowy">Snowy</option>
                    </optgroup>
                    <optgroup label="Special Lighting">
                        <option value="Neon">Neon</option>
                        <option value="Neon Noir">Neon Noir</option>
                        <option value="Dramatic">Dramatic</option>
                        <option value="Cinematic">Cinematic</option>
                        <option value="Underwater">Underwater</option>
                        <option value="Fire">Fire</option>
                        <option value="Magical">Magical</option>
                        <option value="Bioluminescent">Bioluminescent</option>
                    </optgroup>
                </select>
            </div>
        </div>
        <button id="enhance-button">Enhance Prompt</button>

        <div id="result-container" style="display: none;">
            <div id="result" class="result-container" style="display: none;">
                <div class="result-header">
                    <h3>Enhanced Prompt</h3>
                    <div class="view-toggle">
                        <button id="single-view-btn" class="view-btn active">Single</button>
                        <button id="compare-view-btn" class="view-btn">Compare</button>
                    </div>
                </div>
                
                <div class="result-actions">
                    <button id="copy-button" class="action-button"><i class="fas fa-copy"></i> Copy</button>
                    <button id="share-button" class="action-button"><i class="fas fa-share-alt"></i> Share</button>
                    <button id="export-button" class="action-button"><i class="fas fa-download"></i> Export</button>
                    <button id="save-to-compare-button" class="action-button"><i class="fas fa-columns"></i> Save for Compare</button>
                    <label for="import-file" class="action-button" id="import-label"><i class="fas fa-upload"></i> Import</label>
                    <input type="file" id="import-file" accept=".json" style="display: none;">
                </div>
                
                <!-- Single View Mode -->
                <div id="single-view" class="view-mode active">
                    <div id="result-text" class="result-text"></div>
                </div>
                
                <!-- Compare View Mode -->
                <div id="compare-view" class="view-mode">
                    <div class="compare-container">
                        <div class="compare-column">
                            <div class="compare-header">
                                <h4>Current Prompt</h4>
                            </div>
                            <div id="current-prompt" class="compare-content"></div>
                        </div>
                        <div class="compare-column">
                            <div class="compare-header">
                                <h4>Saved Prompt</h4>
                                <button id="clear-saved-prompt" class="small-btn"><i class="fas fa-trash"></i></button>
                            </div>
                            <div id="saved-prompt" class="compare-content"></div>
                        </div>
                    </div>
                    <div class="compare-info">
                        <p>Save the current prompt for comparison using the "Save for Compare" button.</p>
                    </div>
                </div>
            </div>
        </main>
        
        <aside class="sidebar">
            <div class="card history-panel">
                <div class="card-header">
                    <h3 class="card-title">Prompt History</h3>
                    <button id="clear-history" class="btn btn-sm btn-outline" title="Clear History">Clear All</button>
                </div>
                <div id="history-list" class="history-list">
                    <!-- History items will be added here dynamically -->
                </div>
            </div>
        </aside>

        <button id="scroll-to-top-btn">&#8679;</button>

    </div> <!-- Closing page-wrapper -->
    <script src="/static/js/script.js?v={{ version }}"></script>
    <script type="module" src="/static/js/styleManager.js"></script>
    <script type="module" src="/static/js/styleManagerInit.js"></script>
</body>
</html>
