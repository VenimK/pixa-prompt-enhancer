
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PiXa Prompt Enhancer</title>
    <link rel="stylesheet" href="/static/css/styles.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/professional-additions.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/dark-mode-enhancements.css?v={{ version }}">
    <link rel="stylesheet" href="/static/css/style-manager.css?v={{ version }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Apply dark mode before page renders to prevent flash
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark-mode');
        }
    </script>
</head>
<body class="fade-in">
    <div id="toast-container" class="toast-container"></div>
    <button id="back-to-top" class="back-to-top" title="Back to Top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </button>
    <div class="page-wrapper">
        <nav class="navbar">
            <h1 class="nav-title">PiXa Prompt Enhancer</h1>
            <div class="nav-actions">
                <label class="theme-switch" for="theme-toggle" title="Toggle Dark Mode">
                    <input type="checkbox" id="theme-toggle" />
                    <span class="slider round"></span>
                </label>
            </div>
        </nav>

        {% if not api_key_set %}
        <div class="card api-warning">
            <div class="card-header">
                <h3 class="card-title">‚ö†Ô∏è Configuration Required</h3>
            </div>
            <p>The <code>GOOGLE_API_KEY</code> environment variable is not set. Please set the variable and restart the server for full functionality.</p>
        </div>
        {% else %}
        <div class="card api-info">
            <p><strong>API:</strong> {{ api_key_info.provider }} (Key: {{ api_key_info.masked_key }})</p>
        </div>
        {% endif %}
        
        <main class="main-content">
            <div class="card intro-card">
                <h2>Create powerful, nuanced prompts for generative AI models</h2>
                <p>Enhance your text prompts with detailed styles, lighting, and effects to get better results from AI models.</p>
                
                <div class="progress-steps">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">Analyze Image</div>
                            <div class="step-description">Optional - Upload an image for analysis</div>
                        </div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">Enhance Prompt</div>
                            <div class="step-description">Generate detailed AI prompts</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card image-upload-card">
                <div class="card-header">
                    <h3 class="card-title">Step 1: Analyze Image (Optional)</h3>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <div class="drop-zone" id="drop-zone">
                            <input type="file" id="image-upload" accept="image/*" class="drop-zone-input" multiple>
                            <div class="drop-zone-content">
                                <div class="drop-zone-icon">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"></path>
                                        <line x1="16" y1="5" x2="22" y2="5"></line>
                                        <line x1="19" y1="2" x2="19" y2="8"></line>
                                        <circle cx="9" cy="9" r="2"></circle>
                                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"></path>
                                    </svg>
                                </div>
                                <div class="drop-zone-text">
                                    <p class="drop-zone-prompt">Drag & drop an image here, or click to select</p>
                                    <p class="drop-zone-hint">Supports JPG, PNG, GIF, WebP ‚Ä¢ Max 10MB each ‚Ä¢ Up to 2 images</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button id="analyze-button" class="btn btn-primary">
                            <span class="btn-icon">üîç</span>
                            <span>Analyze Image</span>
                        </button>
                        <button id="clear-image-button" class="btn btn-outline" style="display: none;">
                            <span class="btn-icon">üóëÔ∏è</span>
                            <span>Clear</span>
                        </button>
                    </div>
                    
                    <!-- Image Analysis Result Container -->
                    <div id="image-result-container" class="image-result-container" style="display: none; margin-top: 1.5rem; padding: 1rem; background: var(--card-bg); border-radius: var(--radius-md); border: 1px solid var(--border-color);">
                        <div class="image-preview-container" style="margin-bottom: 1rem; text-align: center; display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap;">
                            <div class="image-slot" id="image-slot-a" draggable="true" style="position:relative; display:none; cursor:move; transition: opacity 0.2s;">
                                <div style="text-align:center; font-size:0.75rem; color:var(--text-muted); margin-bottom:4px;">Reference A (Source)</div>
                                <img id="image-preview" src="#" alt="Uploaded preview A" style="max-width: 100%; max-height: 300px; border-radius: var(--radius-sm); display: none; pointer-events: none;">
                                <div class="slot-controls" style="display:flex; gap:6px; justify-content:center; margin-top:6px;">
                                    <button id="replace-a" class="btn btn-xs btn-outline">Replace A</button>
                                    <button id="remove-a" class="btn btn-xs btn-outline">Remove A</button>
                                </div>
                            </div>
                            <button id="swap-images" class="btn btn-outline" style="display:none; flex-shrink:0; padding: 8px 12px; cursor:pointer;" title="Swap images between Reference A and Reference B">
                                <span style="font-size:1.25rem;">‚áÑ</span>
                            </button>
                            <div class="image-slot" id="image-slot-b" draggable="true" style="position:relative; display:none; cursor:move; transition: opacity 0.2s;">
                                <div style="text-align:center; font-size:0.75rem; color:var(--text-muted); margin-bottom:4px;">Reference B (Target)</div>
                                <img id="image-preview-b" src="#" alt="Uploaded preview B" style="max-width: 100%; max-height: 300px; border-radius: var(--radius-sm); display: none; pointer-events: none;">
                                <div class="slot-controls" style="display:flex; gap:6px; justify-content:center; margin-top:6px;">
                                    <button id="replace-b" class="btn btn-xs btn-outline">Replace B</button>
                                    <button id="remove-b" class="btn btn-xs btn-outline">Remove B</button>
                                </div>
                            </div>
                        </div>
                        <div id="add-second-image" style="display:none; text-align:center; margin-bottom: 0.5rem;">
                            <button class="btn btn-outline">+ Add second image</button>
                        </div>
                        <div id="image-progress-container" style="display: none; margin-bottom: 1rem;">
                            <div class="progress-bar" style="height: 4px; background: var(--border-color); border-radius: 2px; overflow: hidden;">
                                <div class="progress" style="height: 100%; width: 0%; background: var(--primary-color); transition: width 0.3s ease;"></div>
                            </div>
                            <p style="text-align: center; margin: 0.5rem 0 0; color: var(--text-muted); font-size: 0.875rem;">Analyzing image...</p>
                        </div>
                        <div id="image-description" style="display: none;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                <h4 style="margin: 0; font-size: 1rem; color: var(--text-color);">Image Analysis</h4>
                                <button id="toggle-analysis" class="btn-text" style="font-size: 0.875rem; color: var(--primary-color); cursor: pointer; background: none; border: none; padding: 0.25rem 0.5rem; display: flex; align-items: center; gap: 0.25rem; font-weight: 500;">
                                    <span id="toggle-text">Show More</span>
                                    <svg id="toggle-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="transition: transform 0.3s ease; transform: rotate(180deg);">
                                        <path d="M18 15l-6-6-6 6"/>
                                    </svg>
                                </button>
                            </div>
                            <div id="analysis-content" class="analysis-content" style="overflow: hidden; transition: max-height 0.3s ease;">
                                <p id="image-description-text" style="margin: 0; color: var(--text-muted); font-size: 0.9375rem; line-height: 1.5;"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card prompt-card">
                <h2>Step 2: Enhance Your Prompt</h2>
                <div class="selector">
                    <label for="prompt-type-select">Prompt Type:</label>
                    <select id="prompt-type-select">
                        <option value="Image">Image</option>
                        <option value="VEO">Video (VEO)</option>
                        <option value="WAN2">Animation (WAN2)</option>
                    </select>
                </div>
                <div class="selector" id="model-selector-container">
                    <label for="model-select">AI Model:</label>
                    <select id="model-select">
                        <option value="default" title="Standard prompt formatting without model-specific optimizations">Default</option>
                        <optgroup label="Photorealistic Models">
                            <option value="flux" title="Optimized for photorealistic imagery with detailed technical specifications. Best for photography-style images with fine details.">Flux (Photorealistic)</option>
                            <option value="z-image-turbo" title="Fast photorealistic image model. Uses standard prompt formatting unless customized.">Z-Image Turbo</option>
                            <option value="pixart" title="Excellent for detailed compositions with strong artistic direction. Good balance of realism and artistic flair.">PixArt (Detailed)</option>
                            <option value="dalle3" title="Excellent for following complex instructions and generating coherent scenes with accurate text rendering.">DALL-E 3 (Coherent)</option>
                        </optgroup>
                        <optgroup label="Versatile Models">
                            <option value="qwen" title="Balanced approach with clear subject descriptions and compositional instructions. Good for versatile, well-composed images.">Qwen (Versatile)</option>
                            <option value="midjourney" title="Excellent for artistic compositions with strong aesthetic appeal. Best for stylized, visually striking imagery.">Midjourney (Aesthetic)</option>
                            <option value="sdxl" title="Good for detailed compositions with strong artistic direction. Versatile across many styles and subjects.">SDXL (Balanced)</option>
                        </optgroup>
                        <optgroup label="Artistic Models">
                            <option value="nunchaku" title="Focuses on style coherence and artistic interpretations. Ideal for creative, stylized imagery with strong mood/atmosphere.">Nunchaku (Artistic)</option>
                            <option value="kandinsky" title="Excellent for abstract and artistic compositions with unique stylistic elements.">Kandinsky (Abstract)</option>
                            <option value="imagen" title="Strong at following detailed instructions and creating coherent scenes with good composition.">Imagen (Coherent)</option>
                        </optgroup>
                    </select>
                </div>
                <!-- Style Selector -->
                <div class="style-selector">
                    <div class="style-header">
                        <h3>Art Style</h3>
                        <div class="style-preview">No style selected</div>
                    </div>
                    <div class="style-search">
                        <input type="text" id="style-search-input" placeholder="üîç Search styles..." autocomplete="off">
                        <div class="style-search-results"></div>
                    </div>
                    <div class="style-categories">
                        <!-- Categories will be populated by JavaScript -->
                    </div>
                    <div class="style-actions">
                        <button id="apply-style" class="btn btn-primary">Apply Style</button>
                        <button id="remove-styles" class="btn btn-warning" style="display: none;">Remove Styles</button>
                        <button id="clear-style" class="btn btn-outline">Clear Selection</button>
                    </div>
                </div>

                <!-- Original Templates Section (hidden by default) -->
                <div class="templates-section" style="display: none;">
                    <label for="template-select">Quick Templates:</label>
                    <div class="template-controls">
                        <select id="template-select">
                            <option value="">Choose a template...</option>
                            <!-- Template options remain the same -->
                        </select>
                    </div>
                </div>
                <div class="textarea-container">
                    <textarea id="prompt-input" placeholder="e.g., a cat riding a skateboard"></textarea>
                    <button id="clear-button" class="clear-btn" title="Clear text">&times;</button>
                    <div class="char-counter">
                        <span id="char-count">0</span>
                    </div>
                </div>

                <!-- Wrapping Preset (A ‚Üí B) -->
                <div class="card" id="wrapping-preset" style="margin-top: 16px;">
                    <div class="card-header">
                        <h3 class="card-title">Wrapping Preset (Reference A ‚Üí Reference B)</h3>
                    </div>
                    <div class="card-body" style="display:grid; gap:12px;">
                        <div style="display:flex; gap:12px; flex-wrap:wrap;">
                            <div class="selector">
                                <label for="wrap-type">Wrap Type</label>
                                <select id="wrap-type">
                                    <option value="vehicle">Vehicle wrap</option>
                                    <option value="full">Full wrap / livery</option>
                                    <option value="partial">Partial panels</option>
                                    <option value="decal">Decal / sticker</option>
                                    <option value="product">Product wrap (can/bottle/glass)</option>
                                    <option value="logo">Logo / branding</option>
                                    <option value="people-object">People/Object (A‚ÜíB transfer)</option>
                                    <option value="sticker-pack">Sticker pack / sheet</option>
                                </select>
                            </div>
                            <div class="selector">
                                <label for="wrap-finish">Finish</label>
                                <select id="wrap-finish">
                                    <option value="glossy">Glossy vinyl</option>
                                    <option value="matte">Matte vinyl</option>
                                    <option value="metallic">Metallic foil</option>
                                    <option value="paper">Paper label</option>
                                    <option value="shrink">Shrink-wrap film</option>
                                </select>
                            </div>
                            <div class="selector" style="min-width:240px;flex:1;">
                                <label for="wrap-scope-preset">Scope Preset</label>
                                <select id="wrap-scope-preset">
                                    <option value="">Custom (use text below)</option>
                                    <option value="all">All visible surfaces</option>
                                    <option value="360">Full 360¬∞ wrap</option>
                                    <option value="full-can">Full can: shoulder + body + lid/top</option>
                                    <option value="body-only">Body only (no lid/rims)</option>
                                    <option value="glass-bowl">Glass (transparent): bowl area</option>
                                    <option value="glass-full">Glass (transparent): full coverage</option>
                                    <option value="glass-opaque">Glass (opaque/colored): replace color</option>
                                    <option value="front">Front label/panel only</option>
                                    <option value="neck">Neck band</option>
                                    <option value="cap">Cap/lid only</option>
                                </select>
                            </div>
                            <div class="selector" style="min-width:240px;flex:1;">
                                <label for="wrap-scope">Custom Scope</label>
                                <input id="wrap-scope" type="text" placeholder="e.g., hood, doors, fenders">
                            </div>
                        </div>

                        <div class="selector" style="display:flex; gap:12px; align-items:flex-start; flex-wrap:wrap;">
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="enforce-palette" checked>
                                Enforce Reference A palette
                            </label>
                            <input id="palette-list" type="text" placeholder="Palette from A (comma-separated)" style="flex:1; min-width:260px;">
                        </div>

                        <div class="selector" style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="plain-enhance">
                                Plain Enhance (ignore all wrap presets)
                            </label>
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="neutralize-b" checked>
                                Replace B colors with A (keep B shape)
                            </label>
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="multi-stage">
                                Multi-stage prompting (better consistency)
                            </label>
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="accessories-only">
                                Accessories only (avoid full outfit swap)
                            </label>
                        </div>

                        <!-- People/Object override: choose detected objects from B -->
                        <div id="object-override-container" class="selector" style="display:none; flex-direction:column; gap:8px;">
                            <label for="object-override">Object(s) from Reference B (override detection)</label>
                            <select id="object-override" multiple size="6" style="min-width:240px; max-width:520px;">
                                <!-- Options populated from image analysis -->
                            </select>
                            <small style="color:var(--text-muted);">Tip: Hold Cmd/Ctrl to select multiple. Leave empty to auto-detect.</small>
                        </div>

                        <!-- Vehicle-specific controls (shown when wrap-type=vehicle) -->
                        <div id="vehicle-controls" style="display:none;">
                            <label style="display:flex; align-items:center; gap:8px;">
                                <input type="checkbox" id="transfer-vehicle-color">
                                Transfer base color from Reference A (otherwise keep Reference B's color)
                            </label>
                        </div>

                        <!-- Logo-specific controls (shown when wrap-type=logo) -->
                        <div id="logo-controls" style="display:none; gap:12px;">
                            <div style="display:flex; gap:12px; flex-wrap:wrap;">
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="logo-placement">Logo Placement</label>
                                    <select id="logo-placement">
                                        <option value="center">Center</option>
                                        <option value="top-center">Top center</option>
                                        <option value="bottom-center">Bottom center</option>
                                        <option value="left">Left side</option>
                                        <option value="right">Right side</option>
                                        <option value="custom">Custom (use scope field)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="logo-size">Logo Size</label>
                                    <select id="logo-size">
                                        <option value="proportional">Proportional (auto)</option>
                                        <option value="small">Small (subtle)</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="large">Large (prominent)</option>
                                        <option value="full">Full coverage</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label style="display:flex; align-items:center; gap:8px; margin-top:24px;">
                                        <input type="checkbox" id="logo-pattern">
                                        Repeating pattern
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Sticker pack controls (shown when wrap-type=sticker-pack) -->
                        <div id="sticker-controls" style="display:none; gap:12px;">
                            <div style="display:flex; gap:12px; flex-wrap:wrap;">
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-count">Number of Stickers</label>
                                    <select id="sticker-count">
                                        <option value="4">4 stickers (2x2)</option>
                                        <option value="6">6 stickers (2x3)</option>
                                        <option value="9" selected>9 stickers (3x3)</option>
                                        <option value="12">12 stickers (3x4)</option>
                                        <option value="16">16 stickers (4x4)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-style">Sticker Style</label>
                                    <select id="sticker-style">
                                        <option value="die-cut" selected>Die-cut with white border</option>
                                        <option value="no-border">Die-cut no border</option>
                                        <option value="rounded">Rounded square</option>
                                        <option value="circle">Circular</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-character-style">Sticker Character Style</label>
                                    <select id="sticker-character-style">
                                        <option value="match-reference" selected>Match Reference A</option>
                                        <option value="cartoon">Cartoon</option>
                                        <option value="chibi">Chibi (super deformed)</option>
                                        <option value="semi-realistic">Semi-realistic</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-sheet-output">Sticker Sheet Output</label>
                                    <select id="sticker-sheet-output">
                                        <option value="realistic" selected>Realistic sheet mockup</option>
                                        <option value="transparent">Transparent PNG assets</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-cut-type">Cut Type</label>
                                    <select id="sticker-cut-type">
                                        <option value="kiss-cut" selected>Kiss-cut (on backing paper)</option>
                                        <option value="die-cut">Die-cut (fully separated)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-border-thickness">Border Thickness</label>
                                    <select id="sticker-border-thickness">
                                        <option value="thin">Thin</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="thick">Thick</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-camera">Camera Angle</label>
                                    <select id="sticker-camera">
                                        <option value="top-down" selected>Top-down flat lay</option>
                                        <option value="slight-angle">Slight angle (product photo)</option>
                                    </select>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label style="display:flex; align-items:center; gap:8px; margin-top:24px;">
                                        <input type="checkbox" id="sticker-inner-keyline">
                                        Inner keyline (thin outline inside border)
                                    </label>
                                </div>
                                <div class="selector" style="flex:1; min-width:180px;">
                                    <label for="sticker-variation">Variation Type</label>
                                    <select id="sticker-variation">
                                        <option value="poses" selected>Different poses/expressions</option>
                                        <option value="elements">Different elements/props</option>
                                        <option value="colors">Different color variants</option>
                                        <option value="scenes">Different scenes/activities</option>
                                        <option value="emotions">Different emotions/moods</option>
                                        <option value="outfits">Different outfits/costumes</option>
                                        <option value="seasons">Seasonal variations</option>
                                        <option value="interactions">Interacting with objects</option>
                                        <option value="weather">Weather/time variations</option>
                                        <option value="styles">Different art styles</option>
                                        <option value="actions">Action/movement variations</option>
                                        <option value="hobbies">Hobbies/sports activities</option>
                                        <option value="gestures">Hand gestures/signs</option>
                                        <option value="occupations">Occupations/professions</option>
                                        <option value="text-bubbles">Text bubbles/messages</option>
                                    </select>
                                </div>
                            </div>
                            <!-- Text bubble messages input (shown when variation=text-bubbles) -->
                            <div id="bubble-text-container" style="display:none; margin-top:12px;">
                                <label for="bubble-text" style="display:block; margin-bottom:6px; font-weight:500;">
                                    Text for Bubbles <span style="color:var(--text-muted); font-size:0.9em;">(separate with commas)</span>
                                </label>
                                <input type="text" id="bubble-text" placeholder="e.g., Hello!, Thanks!, Yay!, Wow!, LOL, OK!, Bye!, Love it!, No way!" 
                                       style="width:100%; padding:8px; border:1px solid var(--border-color); border-radius:6px; font-size:0.95em;">
                                <div style="color:var(--text-muted); font-size:0.85em; margin-top:4px;">
                                    Leave empty for generic varied messages
                                </div>
                            </div>
                        </div>

                        <div style="display:flex; gap:12px; flex-wrap:wrap;">
                            <button id="insert-wrap-prompt" class="btn btn-primary">Insert Wrapping Prompt</button>
                            <span id="wrap-hint" style="color:var(--text-muted); font-size:0.9em;">Uses your A/B analysis above.</span>
                        </div>
                    </div>
                </div>
        <div class="selectors-container">
            <div class="selector" id="text-emphasis-container">
                <label for="text-emphasis-input">Text to Emphasize:</label>
                <div class="text-emphasis-wrapper">
                    <input type="text" id="text-emphasis-input" placeholder="e.g., PiXa Contest">
                </div>
                <div class="text-controls">
                    <button id="text-controls-toggle" class="text-controls-toggle">Show more options</button>
                    <div class="text-control-row">
                        <div class="text-control-group">
                            <label for="text-emphasis-position">Position:</label>
                            <select id="text-emphasis-position">
                                <option value="">Choose position...</option>
                                <optgroup label="Standard Positions">
                                    <option value="center">Center</option>
                                    <option value="top">Top</option>
                                    <option value="bottom">Bottom</option>
                                    <option value="left">Left Side</option>
                                    <option value="right">Right Side</option>
                                </optgroup>
                                <optgroup label="Specific Placements">
                                    <option value="plaque">On Plaque</option>
                                    <option value="sign">On Sign</option>
                                    <option value="banner">On Banner</option>
                                    <option value="screen">On Screen</option>
                                    <option value="etched">Etched/Carved</option>
                                    <option value="floating">Floating/Holographic</option>
                                    <option value="graffiti">As Graffiti</option>
                                    <option value="neon">Neon Sign</option>
                                    <option value="tattoo">As Tattoo</option>
                                    <option value="skywriting">Skywriting</option>
                                </optgroup>
                            </select>
                        </div>
                        <div class="text-control-group">
                            <label for="text-emphasis-size">Size:</label>
                            <select id="text-emphasis-size">
                                <option value="">Choose size...</option>
                                <option value="tiny">Tiny</option>
                                <option value="small">Small</option>
                                <option value="medium">Medium</option>
                                <option value="large">Large</option>
                                <option value="huge">Huge</option>
                                <option value="giant">Giant/Monumental</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-control-row">
                        <div class="text-control-group">
                            <label for="text-emphasis-style">Style:</label>
                            <select id="text-emphasis-style">
                                <option value="">Choose style...</option>
                                <option value="bold">Bold</option>
                                <option value="elegant">Elegant/Serif</option>
                                <option value="modern">Modern/Sans-serif</option>
                                <option value="handwritten">Handwritten</option>
                                <option value="vintage">Vintage</option>
                                <option value="futuristic">Futuristic</option>
                                <option value="gothic">Gothic</option>
                                <option value="blocky">Blocky/3D</option>
                                <option value="minimalist">Minimalist</option>
                                <option value="ornate">Ornate/Decorative</option>
                                <option value="pixel">Pixel/8-bit</option>
                                <option value="calligraphy">Calligraphy</option>
                            </select>
                        </div>
                        <div class="text-control-group">
                            <label for="text-emphasis-color">Color:</label>
                            <select id="text-emphasis-color">
                                <option value="">Choose color...</option>
                                <option value="white">White</option>
                                <option value="black">Black</option>
                                <option value="red">Red</option>
                                <option value="blue">Blue</option>
                                <option value="green">Green</option>
                                <option value="purple">Purple</option>
                                <option value="yellow">Yellow</option>
                                <option value="orange">Orange</option>
                                <option value="pink">Pink</option>
                                <option value="teal">Teal</option>
                                <option value="gold">Gold</option>
                                <option value="silver">Silver</option>
                                <option value="copper">Copper</option>
                                <option value="neon-blue">Neon Blue</option>
                                <option value="neon-pink">Neon Pink</option>
                                <option value="neon-green">Neon Green</option>
                                <option value="glowing">Glowing</option>
                                <option value="rainbow">Rainbow</option>
                                <option value="gradient">Gradient</option>
                                <option value="contrast">High Contrast</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-control-row">
                        <div class="text-control-group">
                            <label for="text-emphasis-effect">Effect:</label>
                            <select id="text-emphasis-effect">
                                <option value="">Choose effect...</option>
                                <option value="shadow">Drop Shadow</option>
                                <option value="outline">Outlined</option>
                                <option value="embossed">Embossed</option>
                                <option value="beveled">Beveled</option>
                                <option value="distressed">Distressed/Worn</option>
                                <option value="glitch">Glitch Effect</option>
                                <option value="blur">Motion Blur</option>
                                <option value="sparkle">Sparkling</option>
                                <option value="fire">Fire Effect</option>
                                <option value="ice">Ice/Frost Effect</option>
                                <option value="smoke">Smoke Effect</option>
                            </select>
                        </div>
                        <div class="text-control-group">
                            <label for="text-emphasis-material">Material:</label>
                            <select id="text-emphasis-material">
                                <option value="">Choose material...</option>
                                <option value="stone">Stone</option>
                                <option value="metal">Metal</option>
                                <option value="wood">Wood</option>
                                <option value="glass">Glass</option>
                                <option value="crystal">Crystal</option>
                                <option value="ice">Ice</option>
                                <option value="paper">Paper</option>
                                <option value="plastic">Plastic</option>
                                <option value="neon">Neon Tubes</option>
                                <option value="led">LED Display</option>
                                <option value="hologram">Holographic</option>
                                <option value="liquid">Liquid</option>
                                <option value="fire">Fire</option>
                            </select>
                        </div>
                    </div>
                    <div class="text-control-row">
                        <div class="text-control-group">
                            <label for="text-emphasis-background">Background:</label>
                            <select id="text-emphasis-background">
                                <option value="">Choose background...</option>
                                <option value="none">No Special Background</option>
                                <option value="contrasting">Contrasting Color</option>
                                <option value="halo">Halo/Glow</option>
                                <option value="spotlight">Spotlight</option>
                                <option value="shadow">Dramatic Shadow</option>
                                <option value="frame">Decorative Frame</option>
                                <option value="ribbon">Ribbon</option>
                                <option value="clouds">Clouds</option>
                                <option value="stars">Stars/Space</option>
                                <option value="blur">Blurred Background</option>
                            </select>
                        </div>
                        <div class="text-control-group">
                            <label for="text-emphasis-integration">Integration:</label>
                            <select id="text-emphasis-integration">
                                <option value="">Choose integration...</option>
                                <option value="foreground">Foreground (Stands Out)</option>
                                <option value="integrated">Integrated with Scene</option>
                                <option value="part-of">Part of Environment</option>
                                <option value="hidden">Subtly Hidden</option>
                                <option value="focal">Main Focal Point</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="selector" id="motion-effect-selector-container" style="display: none;">
                <label for="motion-effect-select">Motion Effect:</label>
                <select id="motion-effect-select">
                    <option value="Static">Static</option>
                    <optgroup label="Camera Movements">
                        <option value="Subtle Zoom In">Subtle Zoom In</option>
                        <option value="Zoom Out">Zoom Out</option>
                        <option value="Pan Left">Pan Left</option>
                        <option value="Pan Right">Pan Right</option>
                        <option value="Tilt Up">Tilt Up</option>
                        <option value="Tilt Down">Tilt Down</option>
                        <option value="Dolly In">Dolly In</option>
                        <option value="Dolly Out">Dolly Out</option>
                        <option value="Tracking Shot">Tracking Shot</option>
                    </optgroup>
                    <optgroup label="Cinematic Effects">
                        <option value="Slow Motion">Slow Motion</option>
                        <option value="Time Lapse">Time Lapse</option>
                        <option value="Dolly Zoom">Dolly Zoom</option>
                        <option value="Whip Pan">Whip Pan</option>
                        <option value="Dutch Angle">Dutch Angle</option>
                    </optgroup>
                    <optgroup label="Special Movements">
                        <option value="Orbital">Orbital</option>
                        <option value="Crane Shot">Crane Shot</option>
                        <option value="Drone Flyover">Drone Flyover</option>
                        <option value="Handheld">Handheld</option>
                        <option value="Steadicam">Steadicam</option>
                    </optgroup>
                    <optgroup label="Subject Motion">
                        <option value="Walking Forward">Walking Forward</option>
                        <option value="Running">Running</option>
                        <option value="Dancing">Dancing</option>
                        <option value="Spinning">Spinning</option>
                        <option value="Floating">Floating</option>
                    </optgroup>
                </select>
            </div>

            <div class="selector">
                <label for="style-select">Style:</label>
                <select id="style-select">
                    <option value="auto">Automatic</option>
                    <optgroup label="Photography & Film">
                        <option value="Photographic">Photographic</option>
                        <option value="Cinematic">Cinematic</option>
                        <option value="Documentary">Documentary</option>
                        <option value="Commercial">Commercial</option>
                        <option value="Vintage Film">Vintage Film</option>
                        <option value="Noir">Film Noir</option>
                        <option value="Polaroid">Polaroid</option>
                        <option value="Retro">Retro</option>
                    </optgroup>
                    <optgroup label="Art Styles">
                        <option value="Fine Art">Fine Art</option>
                        <option value="Impressionist">Impressionist</option>
                        <option value="Expressionist">Expressionist</option>
                        <option value="Cubist">Cubist</option>
                        <option value="Surreal">Surreal</option>
                        <option value="Pop Art">Pop Art</option>
                        <option value="Minimalist">Minimalist</option>
                        <option value="Abstract">Abstract</option>
                        <option value="Digital Art">Digital Art</option>
                    </optgroup>
                    <optgroup label="Genre Styles">
                        <option value="Fantasy">Fantasy</option>
                        <option value="Sci-Fi">Sci-Fi</option>
                        <option value="Cyberpunk">Cyberpunk</option>
                        <option value="Steampunk">Steampunk</option>
                        <option value="Horror">Horror</option>
                        <option value="Gothic">Gothic</option>
                        <option value="Anime">Anime</option>
                        <option value="Cartoon">Cartoon</option>
                        <option value="Comic Book">Comic Book</option>
                    </optgroup>
                    <optgroup label="Lighting & Mood">
                        <option value="Dark">Dark</option>
                        <option value="Bright">Bright</option>
                        <option value="Moody">Moody</option>
                        <option value="Ethereal">Ethereal</option>
                        <option value="Dramatic">Dramatic</option>
                    </optgroup>
                </select>
            </div>
            <div class="selector">
                <label for="cinematography-select">Cinematography:</label>
                <select id="cinematography-select">
                    <option value="auto">Automatic</option>
                    <optgroup label="Basic Shots">
                        <option value="Wide Shot">Wide Shot</option>
                        <option value="Medium Shot">Medium Shot</option>
                        <option value="Close Up">Close Up</option>
                        <option value="Extreme Close Up">Extreme Close Up</option>
                    </optgroup>
                    <optgroup label="Angle Shots">
                        <option value="Bird's Eye">Bird's Eye View</option>
                        <option value="High Angle">High Angle</option>
                        <option value="Low Angle">Low Angle</option>
                        <option value="Dutch Angle">Dutch Angle</option>
                    </optgroup>
                    <optgroup label="Movement Shots">
                        <option value="Tracking Shot">Tracking Shot</option>
                        <option value="Dolly Zoom">Dolly Zoom</option>
                        <option value="Steadicam">Steadicam</option>
                        <option value="Handheld">Handheld</option>
                        <option value="Drone Shot">Drone Shot</option>
                    </optgroup>
                    <optgroup label="Special Shots">
                        <option value="Telephoto">Telephoto</option>
                        <option value="Macro">Macro</option>
                        <option value="Split Screen">Split Screen</option>
                        <option value="Fisheye">Fisheye</option>
                        <option value="Tilt Shift">Tilt Shift</option>
                    </optgroup>
                    <option value="Time-lapse">Time-lapse</option>
                </select>
            </div>
            <div class="selector">
                <label for="lighting-select">Lighting:</label>
                <select id="lighting-select">
                    <option value="auto">Automatic</option>
                    <optgroup label="Natural Light">
                        <option value="Golden Hour">Golden Hour</option>
                        <option value="Sunrise">Sunrise</option>
                        <option value="Midday">Midday</option>
                        <option value="Sunset">Sunset</option>
                        <option value="Moonlight">Moonlight</option>
                        <option value="Natural">Natural</option>
                        <option value="Overcast">Overcast</option>
                    </optgroup>
                    <optgroup label="Studio Light">
                        <option value="Studio">Studio</option>
                        <option value="Soft">Soft</option>
                        <option value="High Key">High Key</option>
                        <option value="Low Key">Low Key</option>
                        <option value="Rembrandt">Rembrandt</option>
                        <option value="Split">Split</option>
                        <option value="Backlit">Backlit</option>
                    </optgroup>
                    <optgroup label="Atmospheric">
                        <option value="Foggy">Foggy</option>
                        <option value="Hazy">Hazy</option>
                        <option value="Smoky">Smoky</option>
                        <option value="Rainy">Rainy</option>
                        <option value="Snowy">Snowy</option>
                    </optgroup>
                    <optgroup label="Special Lighting">
                        <option value="Neon">Neon</option>
                        <option value="Neon Noir">Neon Noir</option>
                        <option value="Dramatic">Dramatic</option>
                        <option value="Cinematic">Cinematic</option>
                        <option value="Underwater">Underwater</option>
                        <option value="Fire">Fire</option>
                        <option value="Magical">Magical</option>
                        <option value="Bioluminescent">Bioluminescent</option>
                    </optgroup>
                </select>
            </div>
        </div>
        <button id="enhance-button">Enhance Prompt</button>

        <div id="result-container" style="display: none;">
            <div id="result" class="result-container" style="display: none;">
                <div class="result-header">
                    <h3>Enhanced Prompt</h3>
                    <div class="view-toggle">
                        <button id="single-view-btn" class="view-btn active">Single</button>
                        <button id="compare-view-btn" class="view-btn">Compare</button>
                    </div>
                </div>
                
                <div class="result-actions">
                    <button id="copy-button" class="action-button"><i class="fas fa-copy"></i> Copy</button>
                    <button id="share-button" class="action-button"><i class="fas fa-share-alt"></i> Share</button>
                    <button id="export-button" class="action-button"><i class="fas fa-download"></i> Export</button>
                    <button id="save-to-compare-button" class="action-button"><i class="fas fa-columns"></i> Save for Compare</button>
                    <label for="import-file" class="action-button" id="import-label"><i class="fas fa-upload"></i> Import</label>
                    <input type="file" id="import-file" accept=".json" style="display: none;">
                </div>
                
                <!-- Single View Mode -->
                <div id="single-view" class="view-mode active">
                    <div id="result-text" class="result-text"></div>
                </div>
                
                <!-- Compare View Mode -->
                <div id="compare-view" class="view-mode">
                    <div class="compare-container">
                        <div class="compare-column">
                            <div class="compare-header">
                                <h4>Current Prompt</h4>
                            </div>
                            <div id="current-prompt" class="compare-content"></div>
                        </div>
                        <div class="compare-column">
                            <div class="compare-header">
                                <h4>Saved Prompt</h4>
                                <button id="clear-saved-prompt" class="small-btn"><i class="fas fa-trash"></i></button>
                            </div>
                            <div id="saved-prompt" class="compare-content"></div>
                        </div>
                    </div>
                    <div class="compare-info">
                        <p>Save the current prompt for comparison using the "Save for Compare" button.</p>
                    </div>
                </div>
            </div>
        </main>
        
        <aside class="sidebar">
            <div class="card history-panel">
                <div class="card-header">
                    <h3 class="card-title">Prompt History</h3>
                    <button id="clear-history" class="btn btn-sm btn-outline" title="Clear History">Clear All</button>
                </div>
                <div id="history-list" class="history-list">
                    <!-- History items will be added here dynamically -->
                </div>
            </div>
        </aside>

        <button id="scroll-to-top-btn">&#8679;</button>

    </div> <!-- Closing page-wrapper -->
    <script src="/static/js/script.js?v={{ version }}"></script>
    <script type="module" src="/static/js/styleManager.js"></script>
    <script type="module" src="/static/js/styleManagerInit.js"></script>
</body>
</html>
